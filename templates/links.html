<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon"
    href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ðŸ©³</text></svg>">
  <link rel="stylesheet" href="/app/static/css/styles.css">
  <title>My Links | Short</title>
</head>
<body class="container mx-auto max-w-screen-md px-4"></body>

  <nav class="navbar container px-0 mx-auto">
    <div class="flex-1 -ml-4">
      <a href="/" class="btn btn-ghost text-3xl">
        <div class="flex items-center font-black text-slate-700">
          <span class="sr-only">SHORT</span>
          <span aria-hidden="true">S</span>
          <svg aria-hidden="true" class="h-[1em] fill-blue-400" xmlns="http://www.w3.org/2000/svg" xml:space="preserve" viewBox="0 0 511.98 511.98">
            <path d="M511.98 463.982 469.482 47.998H42.748L0 463.982h223.991l31.999-127.995 31.999 127.995z" />
            <path class="fill-blue-500" d="M287.989 463.982H511.98l-3.25-31.998H279.99zM231.991 431.984H3.249L0 463.982h223.991zM39.498 79.997l-2.25 21.374h122.246c-24.499 15.875-66.498 34.624-125.246 29.625l-2.25 21.249c7.5.625 14.5.875 21.499.875 45.999 0 80.748-13.25 103.247-25.374 17.999-9.75 30.499-20.125 37.249-26.375h124.246c6.749 6.25 19.249 16.625 37.248 26.375 22.249 12.125 57.249 25.374 103.246 25.374 7 0 14-.25 21.5-.875l-2.25-21.249c-40.748 3.5-78.247-3.75-111.496-21.5-5-2.75-9.5-5.5-13.749-8.125h122.245l-2.25-21.374h-77.997V47.998h-21.25v31.999H138.744V47.998h-21.249v31.999H39.498z" />
            <path class="fill-slate-100" d="M245.49 47.998v138.62c0 5.875 4.75 10.75 10.5 10.75 6 0 10.75-4.875 10.75-10.75V47.998h-21.25z" />
          </svg>
          <span aria-hidden="true">ORT</span>
        </div>
      </a>
    </div>
    <ul class="menu menu-horizontal px-0 -mr-4">
      {{ $p := .AppPathPrefix }}
      {{ if .user }}
        <li><a href="/{{$p}}/links">My Links</a></li>
        <li><a href="/{{$p}}/links/new">Create New Link</a></li>
        <li>
          <form action="/{{$p}}/signout" method="POST">
            <button type="submit">Sign Out</button>
          </form>
        </li>
      {{ else }}
        <li><a href="/{{$p}}/auth/google">Sign in</a></li>
      {{ end }}
    </ul>
  </nav>

  <main class="py-4 grid gap-4 ">
    {{ if not .links }}
      <p>No links found. <a href="/{{$p}}/links/new">Shorten one.</a></p>
    {{ else }}

      <table class="table">
        <thead class="bg-slate-100 shadow">
          <tr>
            <th>Title</th>
            <th>Short URL</th>
            <th>Destination URL</th>
            <th>Notes</th>
          </tr>
        </thead>
        <tbody>
          {{ range .links }}
            <tr>
              <td>
                <a class="link" href="/{{$p}}/links/{{ .short_code }}">{{ .title }}</a>
              </td>

              <td>
                {{ $shortUrl := printf "%s/%s" $.RedirectorBaseURL .short_code }}
                <a class="link" href="{{ $shortUrl }}">{{ $shortUrl }}</a>
              </td>

              <td>
                <a class="link" href="{{ .destination_url }}">{{ .destination_url }}</a>
              </td>

              <td>{{ .notes }}</td>
            </tr>
          {{ end }}
        </tbody>
      </table>

      {{ with .paginationLinks }}
        <div class="join flex justify-end">
          {{ range .}}
            <a href="{{ .Href }}"
              class="join-item text-xs btn btn-sm btn-outline"
              {{ if .Disabled }}disabled{{ end}}>
              {{ if eq .Text "first" }}
                Â«
              {{ else if eq .Text "last" }}
                Â»
              {{ else }}
                {{ .Text }}
              {{ end }}
            </a>
          {{ end }}
        </div>
      {{ end }}

    {{ end }}
  </main>
</body>
</html>
